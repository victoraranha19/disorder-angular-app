import{a as H,b as Q,c as ot,d as rt,e as nt,f as lt,i as mt}from"./chunk-DHRCSQ2U.js";import"./chunk-IVB64ICT.js";import{a as Dt}from"./chunk-I7CEZVIL.js";import{i as pt,j as ut,k as dt,l as gt,m as Ct,n as ft}from"./chunk-PXM6HURP.js";import{b as st,c as ct}from"./chunk-LLPVQ65M.js";import"./chunk-DEL6ZB4B.js";import{a as bt,b as ht,c as Ft,d as It,e as St,f as wt}from"./chunk-A5DQBLHZ.js";import{j as _t,m as vt,n as Mt,o as xt}from"./chunk-MADDMG6F.js";import"./chunk-BMO6FCYL.js";import{A as et,B as it,C as at,a as q,b as z,d as x,n as U,r as J,s as K,t as W,v as b,w as X,x as Y,y as Z,z as tt}from"./chunk-WD7W5XGU.js";import{$ as F,Gb as v,Ib as s,Jb as c,Nc as O,Oc as M,Q as f,Qa as m,Rb as P,S as w,Sb as L,Xb as r,Yb as I,ea as p,eb as _,ec as k,fa as u,fc as R,jb as y,jc as B,kc as $,pa as D,rb as E,sb as T,tb as V,tc as S,ub as N,uc as A,vb as j,vc as G,wb as d,xb as i,yb as a,zb as g}from"./chunk-XEXQQ6KA.js";var Nt=o=>[o,"BRL","symbol","1.2-2","pt-BR"];function jt(o,e){if(o&1&&(i(0,"mat-list-item")(1,"span",5),r(2,"Valor planejado"),a(),i(3,"span",6),r(4),R(5,"currency"),a()()),o&2){let t=c();m(4),I(B(5,1,k(7,Nt,t.categoria().valorPlanejado)))}}var h=class o{categoria=A.required();editar=S();excluir=S();static \u0275fac=function(t){return new(t||o)};static \u0275cmp=_({type:o,selectors:[["app-categoria"]],inputs:{categoria:[1,"categoria"]},outputs:{editar:"editar",excluir:"excluir"},decls:16,vars:2,consts:[[2,"width","300px"],[2,"align-items","center","justify-content","space-between"],[2,"padding","0"],["mat-icon-button","",3,"click"],[2,"padding","8px 0"],["matListItemTitle",""],["matListItemLine",""]],template:function(t,n){t&1&&(i(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),r(3),a(),i(4,"mat-card-actions",2)(5,"button",3),s("click",function(){return n.editar.emit()}),i(6,"mat-icon"),r(7,"edit"),a()(),i(8,"button",3),s("click",function(){return n.excluir.emit()}),i(9,"mat-icon"),r(10,"delete"),a()()()(),i(11,"mat-card-content")(12,"div",4),g(13,"mat-divider"),a(),i(14,"mat-list"),E(15,jt,6,9,"mat-list-item"),a()()()),t&2&&(m(3),I(n.categoria().titulo),m(12),T(n.categoria().valorPlanejado?15:-1))},dependencies:[M,x,q,wt,bt,It,Ft,St,ht,Q,H,ct,st,mt,nt,lt,rt,ot,O],encapsulation:2})};var Pt=["templateModalCategoria"];function Lt(o,e){if(o&1){let t=v();i(0,"app-categoria",5),s("editar",function(){let l=p(t).$implicit,C=c();return u(C.abrirModal(l))})("excluir",function(){let l=p(t).$implicit,C=c();return u(C.excluirCategoria(l))}),a()}if(o&2){let t=e.$implicit;d("categoria",t)}}function kt(o,e){if(o&1){let t=v();i(0,"h2",6),r(1,"Nova Categoria"),a(),i(2,"mat-dialog-content")(3,"form",7),s("ngSubmit",function(){p(t);let l=c();return u(l.salvarCarteira())}),i(4,"div",8)(5,"mat-form-field",9)(6,"mat-label"),r(7,"Nome da Categoria"),a(),g(8,"input",10),a(),i(9,"mat-form-field")(10,"mat-label"),r(11,"Gasto Mensal Planejado"),a(),g(12,"input",11),a()()()(),i(13,"mat-dialog-actions")(14,"button",12),r(15,"Cancelar"),a(),i(16,"button",13),s("click",function(){p(t);let l=c();return u(l.salvarCarteira())}),r(17,"Salvar"),a()()}if(o&2){let t=c();m(3),d("formGroup",t.categoriaForm),m(5),d("formControl",t.categoriaForm.controls.titulo),m(4),d("formControl",t.categoriaForm.controls.valorPlanejado)}}var yt=class o{modalCategoria=G.required("templateModalCategoria");#i=F(pt);#t=F(Dt);#e;categorias=D([]);categoriaForm=new W({id:new b(0,{nonNullable:!0}),titulo:new b("",{nonNullable:!0}),valorPlanejado:new b(0,{nonNullable:!0})});ngOnInit(){this._atualizarCategorias$().subscribe()}abrirModal(e){this.categoriaForm.reset(),this.#e?.close(),e&&(this.categoriaForm.controls.id.setValue(e.id),this.categoriaForm.controls.titulo.setValue(e.titulo),this.categoriaForm.controls.valorPlanejado.setValue(e.valorPlanejado)),this.#e=this.#i.open(this.modalCategoria())}salvarCarteira(){this.#e?.close(),this.categoriaForm.controls.id.value>0?this._editarCategoria():this._criarCategoria()}excluirCategoria(e){this.#t.excluir(e).pipe(f(()=>this._atualizarCategorias$())).subscribe()}_criarCategoria(){let e={titulo:this.categoriaForm.controls.titulo.value,valorPlanejado:this.categoriaForm.controls.valorPlanejado.value,idUsuario:1,ativo:!0};this.#t.criar(e).pipe(f(()=>this._atualizarCategorias$())).subscribe()}_editarCategoria(){let e={id:this.categoriaForm.controls.id.value,titulo:this.categoriaForm.controls.titulo.value,valorPlanejado:this.categoriaForm.controls.valorPlanejado.value,idUsuario:1,ativo:!0};this.#t.editar(e).pipe(f(()=>this._atualizarCategorias$())).subscribe()}_atualizarCategorias$(){return this.#t.listar().pipe(w(e=>this.categorias.set(e)))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=_({type:o,selectors:[["app-categorias"]],viewQuery:function(t,n){t&1&&P(n.modalCategoria,Pt,5),t&2&&L()},decls:10,vars:0,consts:[["templateModalCategoria",""],[2,"display","flex","flex-direction","column","gap","16px"],["mat-button","",3,"click"],[2,"display","flex","flex-wrap","wrap","gap","16px"],[3,"categoria"],[3,"editar","excluir","categoria"],["matDialogTitle",""],[3,"ngSubmit","formGroup"],[2,"display","flex","flex-direction","column"],[2,"width","100%"],["matInput","","placeholder","Sa\xFAde","required","",3,"formControl"],["matInput","","type","number",3,"formControl"],["mat-flat-button","","matDialogClose",""],["mat-flat-button","",3,"click"]],template:function(t,n){if(t&1){let l=v();i(0,"div",1)(1,"h2"),r(2,"Aloca\xE7\xE3o em Categorias"),a(),i(3,"button",2),s("click",function(){return p(l),u(n.abrirModal())}),r(4,"Nova categoria"),a(),i(5,"div",3),N(6,Lt,1,1,"app-categoria",4,V),a()(),y(8,kt,18,3,"ng-template",null,0,$)}t&2&&(m(6),j(n.categorias()))},dependencies:[M,h,it,X,U,Y,J,K,et,at,Z,tt,ft,ut,dt,Ct,gt,x,z,xt,Mt,vt,_t],encapsulation:2})};export{yt as CategoriasComponent};
