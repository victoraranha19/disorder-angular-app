import{a as j,b as H,c as at,d as rt,e as nt,f as ot,i as lt}from"./chunk-DHRCSQ2U.js";import"./chunk-IVB64ICT.js";import{a as St}from"./chunk-XWB75VQM.js";import{i as st,j as pt,k as dt,l as ut,m as Ct,n as ft}from"./chunk-PXM6HURP.js";import{b as mt,c as ct}from"./chunk-LLPVQ65M.js";import"./chunk-DEL6ZB4B.js";import{a as Mt,b as gt,c as ht,d as It,e as Et,f as Ft}from"./chunk-A5DQBLHZ.js";import{j as _t,m as vt,n as xt,o as bt}from"./chunk-MADDMG6F.js";import"./chunk-BMO6FCYL.js";import{A as tt,B as et,C as it,a as z,b as G,d as S,n as Q,r as U,s as J,t as K,v as u,w as W,x as X,y as Y,z as Z}from"./chunk-WD7W5XGU.js";import{$ as T,Gb as E,Ib as d,Jb as c,Nc as q,Oc as F,Q as h,Qa as o,Rb as k,S as D,Sb as R,Xb as n,Yb as _,ea as C,eb as I,fa as f,fc as b,hc as M,jb as N,kc as O,pa as V,rb as v,sb as x,tb as L,tc as y,ub as P,uc as $,vb as B,vc as A,wb as s,xb as i,yb as e,zb as p}from"./chunk-XEXQQ6KA.js";function Vt(r,a){if(r&1&&(i(0,"mat-list-item")(1,"span",5),n(2,"Conta Corrente"),e(),i(3,"span",6),n(4),b(5,"currency"),e()()),r&2){let t=c();o(4),_(M(5,1,t.carteira().contaCorrente,"BRL"))}}function Nt(r,a){if(r&1&&(i(0,"mat-list-item")(1,"span",5),n(2,"Conta Poupan\xE7a"),e(),i(3,"span",6),n(4),b(5,"currency"),e()()),r&2){let t=c();o(4),_(M(5,1,t.carteira().contaPoupanca,"BRL"))}}function Lt(r,a){if(r&1&&(i(0,"mat-list-item")(1,"span",5),n(2,"Conta Investimento"),e(),i(3,"span",6),n(4),b(5,"currency"),e()()),r&2){let t=c();o(4),_(M(5,1,t.carteira().contaInvestimento,"BRL"))}}function Pt(r,a){if(r&1&&(i(0,"mat-list-item")(1,"span",5),n(2,"Limite de Cr\xE9dito"),e(),i(3,"span",6),n(4),b(5,"currency"),e()()),r&2){let t=c();o(4),_(M(5,1,t.carteira().limiteCreditoTotal,"BRL"))}}var w=class r{carteira=$.required();editar=y();excluir=y();static \u0275fac=function(t){return new(t||r)};static \u0275cmp=I({type:r,selectors:[["app-carteira"]],inputs:{carteira:[1,"carteira"]},outputs:{editar:"editar",excluir:"excluir"},decls:19,vars:5,consts:[[2,"width","300px"],[2,"align-items","center","justify-content","space-between"],[2,"padding","0"],["mat-icon-button","",3,"click"],[2,"padding","8px 0"],["matListItemTitle",""],["matListItemLine",""]],template:function(t,l){t&1&&(i(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),n(3),e(),i(4,"mat-card-actions",2)(5,"button",3),d("click",function(){return l.editar.emit()}),i(6,"mat-icon"),n(7,"edit"),e()(),i(8,"button",3),d("click",function(){return l.excluir.emit()}),i(9,"mat-icon"),n(10,"delete"),e()()()(),i(11,"mat-card-content")(12,"div",4),p(13,"mat-divider"),e(),i(14,"mat-list"),v(15,Vt,6,4,"mat-list-item"),v(16,Nt,6,4,"mat-list-item"),v(17,Lt,6,4,"mat-list-item"),v(18,Pt,6,4,"mat-list-item"),e()()()),t&2&&(o(3),_(l.carteira().titulo),o(12),x(l.carteira().contaCorrente?15:-1),o(),x(l.carteira().contaPoupanca?16:-1),o(),x(l.carteira().contaInvestimento?17:-1),o(),x(l.carteira().limiteCreditoTotal?18:-1))},dependencies:[F,S,z,Ft,Mt,It,ht,Et,gt,H,j,ct,mt,lt,nt,ot,rt,at,q],encapsulation:2})};var Bt=["templateModalCarteira"];function kt(r,a){if(r&1){let t=E();i(0,"app-carteira",5),d("editar",function(){let m=C(t).$implicit,g=c();return f(g.abrirModal(m))})("excluir",function(){let m=C(t).$implicit,g=c();return f(g.excluirCarteira(m))}),e()}if(r&2){let t=a.$implicit;s("carteira",t)}}function Rt(r,a){if(r&1){let t=E();i(0,"h2",6),n(1,"Nova Carteira"),e(),i(2,"mat-dialog-content")(3,"form",7),d("ngSubmit",function(){C(t);let m=c();return f(m.salvarCarteira())}),i(4,"div",8)(5,"mat-form-field",9)(6,"mat-label"),n(7,"Nome da Carteira"),e(),p(8,"input",10),e(),i(9,"div",11)(10,"div",8)(11,"mat-form-field")(12,"mat-label"),n(13,"Conta Corrente"),e(),p(14,"input",12),e(),i(15,"mat-form-field")(16,"mat-label"),n(17,"Conta Poupan\xE7a"),e(),p(18,"input",12),e(),i(19,"mat-form-field")(20,"mat-label"),n(21,"Conta Investimento"),e(),p(22,"input",12),e()(),i(23,"div",8)(24,"mat-form-field")(25,"mat-label"),n(26,"Limite total de cr\xE9dito"),e(),p(27,"input",12),e()()()()()(),i(28,"mat-dialog-actions")(29,"button",13),n(30,"Cancelar"),e(),i(31,"button",14),d("click",function(){C(t);let m=c();return f(m.salvarCarteira())}),n(32,"Salvar"),e()()}if(r&2){let t=c();o(3),s("formGroup",t.carteiraForm),o(5),s("formControl",t.carteiraForm.controls.titulo),o(6),s("formControl",t.carteiraForm.controls.contaCorrente),o(4),s("formControl",t.carteiraForm.controls.contaPoupanca),o(4),s("formControl",t.carteiraForm.controls.contaInvestimento),o(5),s("formControl",t.carteiraForm.controls.limiteCreditoTotal)}}var wt=class r{modalCarteira=A.required("templateModalCarteira");#i=T(st);#t=T(St);#e;carteiras=V([]);carteiraForm=new K({id:new u(0,{nonNullable:!0}),titulo:new u("",{nonNullable:!0}),contaCorrente:new u(0,{nonNullable:!0}),contaPoupanca:new u(0,{nonNullable:!0}),contaInvestimento:new u(0,{nonNullable:!0}),limiteCreditoTotal:new u(0,{nonNullable:!0})});ngOnInit(){this._atualizarCarteiras$().subscribe()}abrirModal(a){this.carteiraForm.reset(),this.#e?.close(),a&&(this.carteiraForm.controls.id.setValue(a.id),this.carteiraForm.controls.titulo.setValue(a.titulo),this.carteiraForm.controls.contaCorrente.setValue(a.contaCorrente),this.carteiraForm.controls.contaPoupanca.setValue(a.contaPoupanca),this.carteiraForm.controls.contaInvestimento.setValue(a.contaInvestimento),this.carteiraForm.controls.limiteCreditoTotal.setValue(a.limiteCreditoTotal)),this.#e=this.#i.open(this.modalCarteira())}salvarCarteira(){this.#e?.close(),this.carteiraForm.controls.id.value>0?this._editarCarteira():this._criarCarteira()}excluirCarteira(a){this.#t.excluir(a).pipe(h(()=>this._atualizarCarteiras$())).subscribe()}_criarCarteira(){let a={titulo:this.carteiraForm.controls.titulo.value,contaCorrente:this.carteiraForm.controls.contaCorrente.value,contaPoupanca:this.carteiraForm.controls.contaPoupanca.value??0,contaInvestimento:this.carteiraForm.controls.contaInvestimento.value??0,limiteCreditoTotal:this.carteiraForm.controls.limiteCreditoTotal.value,idUsuario:1,ativo:!0};this.#t.criar(a).pipe(h(()=>this._atualizarCarteiras$())).subscribe()}_editarCarteira(){let a={id:this.carteiraForm.controls.id.value,titulo:this.carteiraForm.controls.titulo.value,contaCorrente:this.carteiraForm.controls.contaCorrente.value,contaPoupanca:this.carteiraForm.controls.contaPoupanca.value,contaInvestimento:this.carteiraForm.controls.contaInvestimento.value,limiteCreditoTotal:this.carteiraForm.controls.limiteCreditoTotal.value,idUsuario:1,ativo:!0};this.#t.editar(a).pipe(h(()=>this._atualizarCarteiras$())).subscribe()}_atualizarCarteiras$(){return this.#t.listar().pipe(D(a=>this.carteiras.set(a)))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=I({type:r,selectors:[["app-carteiras"]],viewQuery:function(t,l){t&1&&k(l.modalCarteira,Bt,5),t&2&&R()},decls:10,vars:0,consts:[["templateModalCarteira",""],[2,"display","flex","flex-direction","column","gap","16px"],["mat-button","",3,"click"],[2,"display","flex","flex-wrap","wrap","gap","16px"],[3,"carteira"],[3,"editar","excluir","carteira"],["matDialogTitle",""],[3,"ngSubmit","formGroup"],[2,"display","flex","flex-direction","column"],[2,"width","100%"],["matInput","","placeholder","Banco do Brasil","required","",3,"formControl"],[2,"display","flex","justify-content","space-between","gap","16px"],["matInput","","type","number",3,"formControl"],["mat-flat-button","","matDialogClose",""],["mat-flat-button","",3,"click"]],template:function(t,l){if(t&1){let m=E();i(0,"div",1)(1,"h2"),n(2,"Aloca\xE7\xE3o em Carteiras"),e(),i(3,"button",2),d("click",function(){return C(m),f(l.abrirModal())}),n(4,"Nova carteira"),e(),i(5,"div",3),P(6,kt,1,1,"app-carteira",4,L),e()(),N(8,Rt,33,6,"ng-template",null,0,O)}t&2&&(o(6),B(l.carteiras()))},dependencies:[F,w,et,W,Q,X,U,J,tt,it,Y,Z,ft,pt,dt,Ct,ut,S,G,bt,xt,vt,_t],styles:[".modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:16px;padding:24px;row-gap:16px}.modal-divisor[_ngcontent-%COMP%]{width:100%;height:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden}"]})};export{wt as CarteirasComponent};
