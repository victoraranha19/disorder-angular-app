import{$ as l,A as a,Q as n,S as i,Tc as u,W as g,l as e,pa as c}from"./chunk-XEXQQ6KA.js";var s="https://disorder-backend-springboot.onrender.com/api";var p=class t{usuarioLogado=c(this._verificaUsuarioLogado());#o=l(u);registrar$(r){return this.#o.post(`${s}/register`,r).pipe(n(()=>this.logar$({login:r.login,senha:r.senha})),a(o=>(console.log(o),this.deslogar(),e({token:""}))),i(()=>this.usuarioLogado.set(this._verificaUsuarioLogado())))}logar$(r){return this.#o.post(`${s}/login`,r).pipe(i(o=>{localStorage.setItem("token",JSON.stringify(o))}),a(o=>(console.error(o),this.deslogar(),e({token:""}))),i(()=>this.usuarioLogado.set(this._verificaUsuarioLogado())))}deslogar(){localStorage.removeItem("token"),this.usuarioLogado.set(this._verificaUsuarioLogado())}_verificaUsuarioLogado(){return!!localStorage.getItem("token")?.length}static \u0275fac=function(o){return new(o||t)};static \u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})};export{p as a};
